<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Minimal Django File Upload Example</title>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
		<!-- Optional theme -->
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

		<!-- Latest compiled and minified JavaScript -->
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>	
	</head>

	<body>
		{% load bootstrap3 %}
		<h3>
			Welcome to the VML upload portal!
		</h3>
		{% if shell_scripts %}
			{% for shell_script in shell_scripts %}
				{% if shell_script.docfile.name == "scripts/vmlModInfoTreeCreation.sh" %}
		<p>Start by downloading the<a href="{{ shell_script.docfile.url }}">VML MOD INFO TREE CREATION SCRIPT</a> to analyze your machine's installed kernels (and their modules/drivers)</p>
				{% else %}
		<p>ERROR! The VML MOD INFO TREE CREATION SCRIPT CANNOT BE FOUND</p>
				{% endif %}
			{% endfor %}
		{% else %}
		<p>(So I guess not shell scripts)</p>
		{% endif %}
		<br />
		<br />

		<!-- Upload form. Note enctype attribute! -->
	{% bootstrap_form form %}
        <form action="{% url "list" %}" class="form" method="post" enctype="multipart/form-data">
                {% csrf_token %}
		{% buttons %}
			<button type="submit" class="btn btn-primary">
				{% bootstrap_icon "star" %} Submit
			</button>
		{% endbuttons %}
        </form>
		<br />
		<br />


		<p> The following machines have added their kernels to VML: </p>	
		<ul>
		{% if kernel_tarballs %}
			{% for kernel_tarball in kernel_tarballs %}
			<li>
				<a href="{{ kernel_tarball.docfile.url }}">
				{{ kernel_tarball.pretty_name }}
				</a>
			</li>
			{% endfor %}
		</ul>
		{% else %}
			<p>No tarballs uploaded, you're the first!</p>
		{% endif %}
	</body>
</html> 
